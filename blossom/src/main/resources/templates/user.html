<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">
<head>
    <title style="text-align: center; vertical-align: middle">Profile</title>
</head>
<body>

<div layout:fragment="content">
	<section class="my-5">
        <div class="container">
            <h2 style="text-align: center; vertical-align: middle"  th:text="'Profile of '+${user.name}">..</h2>

            <table class="table">
                <thead>
                    <tr>
                        <th scope="col">Name</th>
                        <th scope="col">Email</th>
                        <th scope="col">Registered at</th>
                        <th scope="col">Phone number</th>
                        <th scope="col">Last Joined</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td th:text="${user.name}">..</td>
                        <td th:text="${user.email}">..</td>
                        <td th:text="${user.entryDate}">..</td>
                        <td th:text="${user.phoneNumber}">..</td>
                        <td th:text="${user.lastJoined}">..</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </section>
    <section class="my-5" th:unless="${#request.userPrincipal.principal.admin}">
        <div class="container">
            <h2 style="text-align: center; vertical-align: middle">Parcelas associadas </h2>
            <ul class="list-group" style="text-align: center; vertical-align: middle" th:each="parcel : ${user.parcels}">
                <li class="list-group-item">
                    <small class="text-muted" th:text="${parcelStat.count}"></small>
                    <a th:href="@{'/parcel/' + ${parcel.parcelId}}" th:text="${parcel.location}"></a>
                </li>
            </ul>
            <br>
            <a th:href="@{/parcel/new}" class="btn btn-success">Add new parcel</a>
            <a th:href="@{/comment/new}" class="btn btn-success">Add new comment</a>
        </div>
        <div class="container" style="margin-top: 2rem;">
            <button id="apagar">Gerar dados aleat√≥rios</button>
        </div>
    </section>

    <script>
        $(document).ready(function() {
            $('#apagar').click(function() {
                $.ajax({
                    url: 'http://localhost:8020/api/getmeasures',
                    type: 'GET',
                    success: function(msg) {
                        alert('Data generated with sucess');
                    }               
                });
            });
        });
    </script>
</div>

</body>
</html>